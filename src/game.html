<!DOCTYPE html>
<html>

<head>
  <title>Gargoyle Grenadier: Gate Guard</title>
  <style>
    * {
      box-sizing: border-box;
    }

    :root {
      --logic-opacity: 0;
    }
    :root:has(#enable-debug:checked) {
      --logic-opacity: 1;
    }
    #enable-debug {
      opacity: var(--logic-opacity);
    }

    CURSORS

    html {
      font-size: min(calc(100vw / 160), calc(100vh / 70));
      background-color: black;
    }

    html, body, .state-ctx, .timer-ctx, .maze-ctx {
      width: 100vw;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }

    STATE_CTX
    TIMER_CTX
    MAZE_CTX

    .aspect {
      position: fixed;
      left: calc(50% - 80rem);
      top: calc(50% - 35rem);
      width: 160rem;
      height: 70rem;

      perspective: 100rem;
    }
    .perspective {
      position: absolute;
      width: 160rem;
      height: 90rem;
      bottom: 5rem;
      transform: rotateX(30deg);
      transform-origin: 50% 100%;
      margin: 0;
    }

    .game-board {
      display: grid;
      grid-template-areas:
        "g y y"
        "m m s";
      grid-template-columns: 40rem 72rem 48rem;
      grid-template-rows: 46rem 44rem;
    }

    .gateroom {
      grid-area: g;
    }
    .yard {
      grid-area: y;
    }
    .maze {
      grid-area: m;

      display: grid;
      grid-template-columns: repeat(28, 1fr);
      grid-template-rows: repeat(11, 1fr);
    }

    .end-box {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: #800;
      z-index: max(-2, calc(1 + 1e9 * (var(--approach) - 1)));
    }
    .stop-box {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: #008;
      z-index: -1;
    }

    .logic {
      z-index: 0;
    }
    .logic, .end-box, .stop-box {
      opacity: var(--logic-opacity);
    }
    .logic {
      .gateroom {
        background-color: #eee;
      }
      .yard {
        background-color: #fff;
      }
      .abyss {
        background-color: #444;
      }
      .repair {
        background-color: #400;
      }
      .cell {
        background-color: #964;
      }
      .storage {
        background-color: #eee;
      }
    }

    .graphics {
      z-index: -3;
    }
  </style>
</head>

<body>
  <input type="checkbox" id="enable-debug">
  <div class="state-ctx">
    <div class="timer-ctx">
      <div class="maze-ctx">
        <div class="end-box"></div>
        <div class="stop-box"></div>
        <div class="aspect graphics">
          <div class="perspective">
            <div class="game-board">
              <div class="gateroom">
                GATEROOM_GRAPHICS
              </div>
              <div class="yard">
                YARD_GRAPHICS
              </div>
              <div class="maze">
                MAZE_GRAPHICS
              </div>
              <div class="storage">
                STORAGE_GRAPHICS
              </div>
            </div>
          </div>
        </div>
        <div class="aspect logic">
          <div class="perspective">
            <div class="game-board">
              <div class="gateroom">
                GATEROOM_LOGIC
              </div>
              <div class="yard">
                YARD_LOGIC
              </div>
              <div class="maze">
                MAZE_LOGIC
              </div>
              <div class="storage">
                STORAGE_LOGIC
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</body>

</html>
